# かなパワー

左Ctrlキーのみを押して離すと自動的にIMEをオフに、右Ctrlキーのみを押して離すと自動的にIMEをオンにするWindowsアプリケーションです。

## 機能

- 左Ctrlキーのみを押して離した時に自動的にIMEをオフにします
- 右Ctrlキーのみを押して離した時に自動的にIMEをオンにします
- 他のキーと組み合わせて使用した場合（Ctrl+Cなど）は通常の動作をします
- システムトレイに常駐し、バックグラウンドで動作します
- ログは`kana_power.log`ファイルに出力されます
- 設定ファイルでキー割り当てとログレベルをカスタマイズ可能です

## 使い方

1. `kana_power.exe`を実行します
2. システムトレイにアイコンが表示されます
3. 左Ctrlキーのみを押して離すと、自動的にIMEがオフになります
4. 右Ctrlキーのみを押して離すと、自動的にIMEがオンになります
5. 終了する場合は、システムトレイのアイコンを右クリックして「終了」を選択します

## 設定ファイル

アプリケーションと同じディレクトリに`config.json`ファイルを作成することで、以下の設定をカスタマイズできます：

```json
{
  "log_level": "warn",
  "keys": {
    "ime_off": 162,  // 左Ctrlキー（VK_LCONTROL）
    "ime_on": 163    // 右Ctrlキー（VK_RCONTROL）
  }
}
```

### 設定項目

- `log_level`: ログの出力レベル
  - 指定可能な値: "error", "warn", "info", "debug", "trace"
  - デフォルト: "warn"

- `keys`: キー割り当ての設定
  - `ime_off`: IMEをオフにするキーの仮想キーコード
    - デフォルト: 162（左Ctrlキー）
  - `ime_on`: IMEをオンにするキーの仮想キーコード
    - デフォルト: 163（右Ctrlキー）

### 主な仮想キーコード

- 左Ctrlキー: 162
- 右Ctrlキー: 163
- 左Altキー: 164
- 右Altキー: 165

設定ファイルが存在しない場合は、デフォルト設定（左CtrlキーでIMEオフ、右CtrlキーでIMEオン）が使用されます。

## 動作環境

- Windows 10以降
- Rust 1.75.0以降（ビルドする場合）

## ビルド方法

```bash
cargo build --release
```

ビルドしたファイルは`target/release/kana_power.exe`に生成されます。

## 注意事項

- 管理者権限は不要です
- キーボードフックを使用しているため、セキュリティソフトに警告される可能性があります
- IMEの状態によっては正しく動作しない場合があります

## ライセンス

MIT
